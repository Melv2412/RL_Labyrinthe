<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr√©er un Labyrinthe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

        <div class="config-section">
            <h2 class="config-title">‚öôÔ∏è Configuration</h2>
            <form method="post" action="{% url 'create_maze' %}">
                {% csrf_token %}
                <div class="input-group">
                    <div class="input-field">
                        <label for="rows">Nombre de lignes</label>
                        <input type="number" id="rows" name="rows" min="3" max="20" value="5" required>
                    </div>
                    <div class="input-field">
                        <label for="cols">Nombre de colonnes</label>
                        <input type="number" id="cols" name="cols" min="3" max="20" value="5" required>
                    </div>
                </div>
                <button type="submit" name="action" value="generate" class="btn">üé≤ G√©n√©rer la grille</button>
            </form>
        </div>

        {% if show_grid %}
        <div class="editor-section">
            <h2 class="config-title">üé® √âditeur de Labyrinthe</h2>
            
            <div class="instructions">
                <h3>üìã Instructions</h3>
                <ul>
                    <li><strong>S</strong> = Point de d√©part (vert) - <span style="color: #4ade80;">Obligatoire, un seul autoris√©</span></li>
                    <li><strong>G</strong> = Point d'arriv√©e (bleu) - <span style="color: #60a5fa;">Obligatoire, un seul autoris√©</span></li>
                    <li><strong>#</strong> = Mur (noir) - Obstacles infranchissables</li>
                    <li><strong>.</strong> = Case vide (marron) - Chemins possibles</li>
                </ul>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box start">S</div>
                    <span>D√©part</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box goal">G</div>
                    <span>Arriv√©e</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box wall"></div>
                    <span>Mur (#)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box empty"></div>
                    <span>Vide (.)</span>
                </div>
            </div>

            <form method="post" action="{% url 'solve_custom_maze' %}">
                {% csrf_token %}
                <div class="grid-editor">
                    <div class="maze-grid" style="grid-template-columns: repeat({{ cols_range|length }}, 1fr);">
                        {% for r in rows_range %}
                            {% for c in cols_range %}
                                <select name="cell_{{ r }}_{{ c }}" class="cell-editor" required aria-label="Cell {{ r }},{{ c }}">
                                    <option value=".">. Vide</option>
                                    <option value="#"># Mur</option>
                                    <option value="S">S D√©part</option>
                                    <option value="G">G Arriv√©e</option>
                                </select>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                <div style="text-align: center;">
                    <button type="submit" class="btn">üöÄ R√©soudre mon labyrinthe</button>
                </div>
            </form>
        </div>

        <div class="example-section">
            <h3>üí° Exemple de labyrinthe valide</h3>
            <div class="example-grid">
                <div class="example-cell" style="background: radial-gradient(circle, #4ade80, #22c55e); color: white; border: 2px solid #16a34a;">S</div>
                <div class="example-cell" style="background: #4a3929; border: 1px solid #3a2919;"></div>
                <div class="example-cell" style="background: #1a1a1a; border: 1px solid #0a0a0a;"></div>
                <div class="example-cell" style="background: #1a1a1a; border: 1px solid #0a0a0a;"></div>
                <div class="example-cell" style="background: #4a3929; border: 1px solid #3a2919;"></div>
                <div class="example-cell" style="background: radial-gradient(circle, #60a5fa, #3b82f6); color: white; border: 2px solid #2563eb;">G</div>
            </div>
            <p style="text-align: center; color: #00cccc; font-size: 0.9em;">
                Un labyrinthe simple 2√ó3 avec un d√©part (S), une arriv√©e (G), des murs (#) et des cases vides (.)
            </p>
        </div>
        {% endif %}

        <div style="text-align: center;">
            <a href="{% url 'home' %}" class="back-link">‚¨Ö Retour au menu</a>
        </div>
    </div>
</body>
</html>